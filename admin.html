<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel do Administrador</title>
</head>
<body>
  <h1>Painel do Administrador</h1>
  <p id="who"></p>

  <button id="btnCadastrar">Cadastrar usuário</button>

  <script type="module">
    import { createClient } from 'https://cdn.skypack.dev/@supabase/supabase-js'

    const supabase = createClient(
      'https://ilsbyrvnrkutwynujfhs.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlsc2J5cnZucmt1dHd5bnVqZmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzNDAwNDEsImV4cCI6MjA2OTkxNjA0MX0.o56R-bf1Nt3PiqMZbG_ghEPYZzrPnEU-jCdYKkjylTQ'
    )

    const ADMIN_EMAIL = 'contato.ipev@gmail.com' // admin autorizado

    // exige sessão
    const { data: { session } } = await supabase.auth.getSession()
    if (!session) {
      window.location.href = 'index.html'
    }

    // confirma que é admin
    const { data: { user } } = await supabase.auth.getUser()
    const email = (user?.email || '').toLowerCase()
    if (email !== ADMIN_EMAIL) {
      // se não for admin, manda para o menu normal
      window.location.href = 'menu.html'
    }

    // exibe quem está logado
    document.getElementById('who').textContent = `Logado como: ${email}`

    // botão (placeholder)
    document.getElementById('btnCadastrar').addEventListener('click', () => {
      alert('Tela de cadastro de usuário (em breve).')
      // aqui depois vamos abrir a tela/ formulário de cadastro
    })
  </script>
</body>
</html>
