<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>√Årea do Gestor ‚Äî IPEV</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --azul: #0ea5b7;
      --branco:#fff;
    }
    html,body{
      margin:0; padding:0; font-family: Arial, Helvetica, sans-serif;
      background:#f3f7f8; color:#0b2340;
    }

    /* HERO com a sua imagem (mesma pasta) */
    .hero{
      position: relative;
      min-height: 220px;
      display:flex; align-items:center;
      background-image:
        linear-gradient(rgba(0,0,0,.35), rgba(0,0,0,.35)),
        url('frota-bg.jpg');          /* üëà sua imagem aqui */
      background-size: cover;
      background-position: center;
    }
    .hero .wrap{
      width: 100%;
      max-width: 1100px;
      margin: 0 auto;
      padding: 28px 20px;
      display:flex; justify-content: space-between; align-items: flex-end;
    }
    .titulo{
      color: var(--branco);
      margin: 0;
      font-size: 28px;
      letter-spacing: .5px;
      text-shadow: 0 2px 6px rgba(0,0,0,.35);
    }
    .sub{
      color:#eaf7fb;
      margin-top:6px;
      font-size:14px;
    }
    .chip-user{
      background: rgba(255,255,255,.9);
      color:#123;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,.15);
    }

    /* CONTE√öDO */
    .main{ max-width:1100px; margin: -28px auto 32px; padding: 0 20px; }
    .card{
      background:#fff; border-radius:14px; box-shadow: 0 10px 24px rgba(16,24,40,.08); padding: 22px;
    }
    .card h2{ margin: 0 0 14px 0; color:#124a63; font-size:20px; }
    .grid-actions{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:14px; }
    .btn{
      appearance:none; border:0; cursor:pointer;
      padding:14px 18px; border-radius:12px; font-size:16px; font-weight:bold;
      color:#fff; background: linear-gradient(135deg, var(--azul), #1d9bb7);
      box-shadow: 0 8px 18px rgba(13, 135, 160, .25);
      transition: transform .05s ease, box-shadow .2s ease, opacity .2s ease;
      text-align:center;
    }
    .btn:hover{ box-shadow: 0 10px 22px rgba(13, 135, 160, .32); }
    .btn:active{ transform: translateY(1px); }
    .muted{ color:#516271; font-size:13px; margin-top:6px; }

    /* Topo com Sair */
    .topbar {
      position: fixed; top: 10px; right: 10px; z-index: 20;
      display:flex; gap:8px; align-items:center;
    }
    .btn-sair { background:#6b7280; color:#fff; border:0; border-radius:6px; padding:8px 14px; cursor:pointer; }
    .btn-sair:hover { background:#4b5563; }
  </style>
</head>
<body>

  <!-- TOPBAR: bot√£o Sair -->
  <div class="topbar">
    <button id="btnSair" class="btn-sair">Sair</button>
  </div>

  <!-- HERO -->
  <section class="hero">
    <div class="wrap">
      <div>
        <h1 class="titulo">√Årea do Gestor</h1>
        <div class="sub">Gest√£o de usu√°rios e permiss√µes do sistema</div>
      </div>
      <div id="chipUser" class="chip-user"></div>
    </div>
  </section>

  <!-- CONTE√öDO -->
  <main class="main">
    <div class="card">
      <h2>A√ß√µes r√°pidas</h2>
      <div class="grid-actions">
        <button id="btnCadastrar" class="btn">+ Cadastrar usu√°rio</button>
      </div>
      <div class="muted">Em breve: listar usu√°rios, redefinir senha, permiss√µes, etc.</div>
    </div>
  </main>

  <!-- Prote√ß√£o + l√≥gica -->
  <script type="module">
    import { createClient } from 'https://cdn.skypack.dev/@supabase/supabase-js'

    const supabase = createClient(
      'https://ilsbyrvnrkutwynujfhs.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlsc2J5cnZucmt1dHd5bnVqZmhzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzNDAwNDEsImV4cCI6MjA2OTkxNjA0MX0.o56R-bf1Nt3PiqMZbG_ghEPYZzrPnEU-jCdYKkjylTQ'
    )

    const ADMIN_EMAIL = 'contato.ipev@gmail.com'

    // Exige sess√£o
    const { data: { session } } = await supabase.auth.getSession()
    if (!session) {
      window.location.replace('index.html')
    }

    // Confirma que √© admin
    const { data: { user } } = await supabase.auth.getUser()
    const email = (user?.email || '').toLowerCase()
    if (email !== ADMIN_EMAIL) {
      window.location.replace('menu.html')
    }

    // Exibe quem est√° logado
    document.getElementById('chipUser').textContent = `Logado: ${email}`

    // Bot√£o cadastrar (placeholder)
    document.getElementById('btnCadastrar').addEventListener('click', () => {
      alert('Tela de cadastro de usu√°rio (em breve).')
    })

    // Bot√£o sair
    document.getElementById('btnSair')?.addEventListener('click', async () => {
      await supabase.auth.signOut()
      window.location.replace('index.html')
    })

    // Se deslogar em outra aba, sair aqui tamb√©m
    supabase.auth.onAuthStateChange((event) => {
      if (event === 'SIGNED_OUT') window.location.replace('index.html')
    })
  </script>
</body>
</html>
